import{d as z,r as c,_ as G,k as F,y as R,n as a,m as o,l as A,f as e,Q as l,p as n,a4 as p,a3 as E,u as N,a0 as D,t as h,v as k,q as $,F as V,a7 as J,a8 as Y}from"./index.f8fb5ca0.js";import{Q as r,c as q}from"./use-transition.db48bfab.js";import{Q as C}from"./use-tick.6f95c5e1.js";import{Q as b}from"./QCard.8dee1b5e.js";import{i as H,a as K,Q as I}from"./index.838fb2fd.js";import{Q as X}from"./QDialog.68c7c7f6.js";import{Q as Z}from"./QPage.aaf9e4ec.js";import"./_commonjsHelpers.d2428edb.js";var j=z({setup(){let t;(s=>{s[s.None=0]="None",s[s.Error=1]="Error",s[s.Warning=2]="Warning",s[s.Success=3]="Success"})(t||(t={}));let u;(s=>{s[s.None=0]="None",s[s.NFCWriter=1]="NFCWriter"})(u||(u={}));const S=c({[0]:"",[1]:"negative text-negative",[2]:"warning text-warning",[3]:"positive text-positive"}),T=c({[0]:"",[1]:"\u5199\u5165 NFC \u6807\u7B7E"}),f=c(()=>{}),x=c(()=>{}),i=c(!1),y=c(!1),_=c({total:0,current:0,currentTab:0}),m=c({status:0,icon:"",title:"",message:""});async function P(s){i.value=!0,M(1);try{await O([{recordType:"android.com:pkg",data:new TextEncoder().encode(s)}]),w(3,"mdi-check-circle-outline","\u5199\u5165\u6210\u529F","\u751F\u6210 NFC \u542F\u52A8\u5361\u6210\u529F\u3002")}catch(v){console.error(v)}await L(),i.value=!1}function M(s){U(),_.value.total=s,_.value.current=0,y.value=!0}async function L(){await f.value(),y.value=!1}async function O(s){return _.value.current+=1,_.value.currentTab=1,new Promise(async(v,g)=>{const B=new AbortController,Q=new NDEFReader;try{f.value=()=>{f.value=()=>{},B.abort({message:"Cancelled"})};try{const d=new AbortController;await Q.scan({signal:d.signal}),d.abort()}catch{}await Q.write({records:s},{signal:B.signal}),f.value=()=>{},v()}catch(d){d.message==="Cancelled"?(w(2,"mdi-cancel","\u6D41\u7A0B\u88AB\u624B\u52A8\u53D6\u6D88","\u4F60\u53D6\u6D88\u4E86\u5199\u5165 NFC \u6807\u7B7E\uFF0C\u8BF7\u91CD\u65B0\u5F00\u59CB\u6D41\u7A0B\u3002"),g(new Error("Cancelled"))):d.message.startsWith("Failed to write due to an IO error")?(w(1,"mdi-pencil-remove-outline","NFC Tag \u5199\u5165\u5931\u8D25","\u53D1\u751F\u4E86 I/O \u9519\u8BEF\uFF0C\u5199\u5165\u65F6\u8BF7\u4E0D\u8981\u79FB\u52A8\u624B\u673A\uFF0C\u4F1A\u5BFC\u81F4\u6570\u636E\u6D41\u4E0D\u7A33\u5B9A\uFF0C\u8BF7\u91CD\u65B0\u5F00\u59CB\u6D41\u7A0B\u3002"),g(d)):(f.value=()=>{},w(1,"mdi-nfc-variant-off","\u4E0D\u53D7\u652F\u6301\u7684 NFC \u8BBE\u5907","\u4F60\u7684\u8BBE\u5907\u6CA1\u6709\u53EF\u4F9B\u8C03\u7528\u7684 NFC \u8BBE\u5907\uFF0C\u8BF7\u786E\u8BA4\u4F60\u6253\u5F00\u4E86\u624B\u673A\u7684 NFC \u5F00\u5173\uFF0C\u5E76\u63D0\u4F9B\u4E86\u4F7F\u7528 NFC \u8BBE\u5907\u7684\u6743\u9650\u3002"),g(d))}})}function w(s,v,g,B){m.value.status=s,m.value.icon=v,m.value.title=g,m.value.message=B}function U(){m.value.status=0}return{isAndroid:H,isChrome:K,DialogTab:u,STATUS_CLASS_NAME:S,STEP_DIALOG_TITLE:T,onDialogCallback:x,outputLoading:i,showDialog:y,stepInfo:_,statusInfo:m,createLaunchCard:P,closeDialog:L}}});const W=t=>(J("data-v-1b624064"),t=t(),Y(),t),ee={class:"fit column no-wrap"},ae={class:"m--flex--0-0"},te={class:"fit row q-px-sm"},se={class:"m--flex--0-0"},oe={class:"fit q-pa-md"},ue={class:"m--flex--0-0"},le={class:"fit row q-px-sm"},ne={class:"q-gutter-x-sm"},re={class:"m--flex--0-0"},ie={class:"fit row q-px-sm"},de={class:"q-gutter-x-sm"},ce={class:"m--flex--0-0"},fe={class:"fit row q-px-sm"},me={class:"q-gutter-x-sm"},pe={key:0,class:"m--flex--0-0"},_e=W(()=>o("div",{class:"m--flex--1-1"},null,-1)),ve={class:"m--flex--0-0"},ge=W(()=>o("div",{class:"m--flex--1-1"},null,-1)),Fe={class:"text-h6"},he={class:"flex-center",style:{width:"32px",height:"32px"}},Ce={class:"m--alipay-nfc-tag-writer--dialog-tab-container"},we={key:0,class:"nfc-writer flex flex-center"},Be={class:"column items-center text-center"};function Ae(t,u,S,T,f,x){return F(),R(Z,{style:{height:"0"}},{default:a(()=>[o("div",ee,[t.isAndroid&&t.isChrome?(F(),A(V,{key:0},[o("div",ae,[o("div",te,[e(p,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(r,null,{default:a(()=>[e(l,{header:""},{default:a(()=>[n("\u524D\u63D0\u6761\u4EF6")]),_:1})]),_:1})]),_:1})])]),e(C),o("div",se,[o("div",oe,[e(l,null,{default:a(()=>[n(" \u5728\u4F7F\u7528\u672C\u5DE5\u5177\u4E4B\u524D\uFF0C\u60A8\u9700\u8981\uFF1A ")]),_:1}),e(l,null,{default:a(()=>[n(" 1\u3001\u51C6\u5907\u4E00\u4E9B\u7A7A\u767D\u7684 ntag 213/215/216\uFF0C\u53EF\u4EE5\u5728\u6DD8\u5B9D\u8D2D\u4E70\uFF0C\u7528\u4E8E\u5199\u5165 NFC Tag \u6570\u636E\u3002 ")]),_:1})])]),e(C),o("div",ue,[o("div",le,[e(p,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(r,null,{default:a(()=>[e(l,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u56FD\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(r,{side:"",class:"q-mr-md"},{default:a(()=>[o("div",ne,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u56FD\u670D",onClick:u[0]||(u[0]=N(i=>t.createLaunchCard("com.RoamingStar.BlueArchive"),["prevent","stop"])),loading:t.outputLoading},{loading:a(()=>[e(q)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),o("div",re,[o("div",ie,[e(p,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(r,null,{default:a(()=>[e(l,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u56FD\u9645\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(r,{side:"",class:"q-mr-md"},{default:a(()=>[o("div",de,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u56FD\u9645\u670D",onClick:u[1]||(u[1]=N(i=>t.createLaunchCard("com.nexon.bluearchive"),["prevent","stop"])),loading:t.outputLoading},{loading:a(()=>[e(q)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),o("div",ce,[o("div",fe,[e(p,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(r,null,{default:a(()=>[e(l,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u65E5\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(r,{side:"",class:"q-mr-md"},{default:a(()=>[o("div",me,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u65E5\u670D",onClick:u[2]||(u[2]=N(i=>t.createLaunchCard("com.YostarJP.BlueArchive"),["prevent","stop"])),loading:t.outputLoading},{loading:a(()=>[e(q)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),t.statusInfo.status?(F(),A("div",pe,[e(b,{flat:"",bordered:"",class:k(`m--alipay-nfc-tag-writer--status ${t.STATUS_CLASS_NAME[t.statusInfo.status]} q-ma-md`)},{default:a(()=>[e(p,{class:"q-pl-none q-py-sm"},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(D,{class:"q-ml-md",name:t.statusInfo.icon},null,8,["name"])]),_:1}),e(r,{class:"q-pl-none"},{default:a(()=>[e(l,null,{default:a(()=>[n(h(t.statusInfo.title),1)]),_:1}),e(l,{caption:"",class:k(`-${t.STATUS_CLASS_NAME[t.statusInfo.status]}`)},{default:a(()=>[n(h(t.statusInfo.message),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["class"])])):$("",!0),_e],64)):(F(),A(V,{key:1},[o("div",ve,[e(b,{flat:"",bordered:"",class:"m--alipay-nfc-tag-writer--status negative text-negative q-ma-md"},{default:a(()=>[e(p,{class:"q-pl-none q-py-sm"},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(D,{class:"q-ml-md",name:"mdi-cellphone-remove"})]),_:1}),e(r,{class:"q-pl-none"},{default:a(()=>[e(l,null,{default:a(()=>[n("\u4E0D\u53D7\u652F\u6301\u7684\u5E73\u53F0")]),_:1}),e(l,{caption:"",class:"text-negative"},{default:a(()=>[n("\u8BE5\u5DE5\u5177\u53EA\u80FD\u5728\u652F\u6301 NFC \u529F\u80FD\u7684\u5B89\u5353\u8BBE\u5907\u4E0A\u4F7F\u7528\uFF0C\u4E14\u6D4F\u89C8\u5668\u5FC5\u987B\u662F Chrome \u5185\u6838\u3002")]),_:1})]),_:1})]),_:1})]),_:1})]),ge],64)),e(X,{class:"m--alipay-nfc-tag-writer--dialog non-selectable",modelValue:t.showDialog,"onUpdate:modelValue":u[4]||(u[4]=i=>t.showDialog=i),persistent:""},{default:a(()=>[e(b,null,{default:a(()=>[e(I,null,{default:a(()=>[o("div",Fe,h(t.STEP_DIALOG_TITLE[t.stepInfo.currentTab])+"("+h(t.stepInfo.current)+"/"+h(t.stepInfo.total)+")",1)]),_:1}),e(I,{class:"absolute-top-right"},{default:a(()=>[o("div",he,[e(E,{dense:"",flat:"",icon:"mdi-close",onClick:u[3]||(u[3]=N(i=>t.closeDialog(),["prevent","stop"]))})])]),_:1}),e(I,{class:"q-pt-none"},{default:a(()=>[o("div",Ce,[t.stepInfo.currentTab===t.DialogTab.NFCWriter?(F(),A("div",we,[o("div",Be,[e(D,{class:"q-mb-lg",size:"40px",name:"mdi-nfc"}),e(l,{class:"text-h6"},{default:a(()=>[n("\u9760\u8FD1 NFC \u6807\u7B7E")]),_:1}),e(l,{class:"text-h6"},{default:a(()=>[n("\u5199\u5165\u6570\u636E")]),_:1})])])):$("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Te=G(j,[["render",Ae],["__scopeId","data-v-1b624064"]]);export{Te as default};
