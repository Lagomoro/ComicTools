import{d as M,r as c,_ as z,k as F,y as G,n as a,m as l,l as A,f as e,Q as o,p as n,ai as m,ah as E,a6 as y,t as h,v as k,q as Q,F as $,al as R,am as J}from"./index.d67af4a6.js";import{Q as i,i as C,h as D}from"./_commonjsHelpers.fa85a760.js";import{i as Y,a as H,Q as q,b,c as K}from"./index.a56b436f.js";import{Q as X}from"./QPage.1e8a9f47.js";var Z=M({setup(){let t;(s=>{s[s.None=0]="None",s[s.Error=1]="Error",s[s.Warning=2]="Warning",s[s.Success=3]="Success"})(t||(t={}));let u;(s=>{s[s.None=0]="None",s[s.NFCWriter=1]="NFCWriter"})(u||(u={}));const I=c({[0]:"",[1]:"negative text-negative",[2]:"warning text-warning",[3]:"positive text-positive"}),S=c({[0]:"",[1]:"\u5199\u5165 NFC \u6807\u7B7E"}),f=c(()=>{}),T=c(()=>{}),r=c(!1),N=c(!1),p=c({total:0,current:0,currentTab:0}),_=c({status:0,icon:"",title:"",message:""});async function W(s){r.value=!0,P(1);try{await O([{recordType:"android.com:pkg",data:new TextEncoder().encode(s)}]),B(3,"mdi-check-circle-outline","\u5199\u5165\u6210\u529F","\u751F\u6210 NFC \u542F\u52A8\u5361\u6210\u529F\u3002")}catch(v){console.error(v)}await x(),r.value=!1}function P(s){U(),p.value.total=s,p.value.current=0,N.value=!0}async function x(){await f.value(),N.value=!1}async function O(s){return p.value.current+=1,p.value.currentTab=1,new Promise(async(v,g)=>{const w=new AbortController,L=new NDEFReader;try{f.value=()=>{f.value=()=>{},w.abort({message:"Cancelled"})};try{const d=new AbortController;await L.scan({signal:d.signal}),d.abort()}catch{}await L.write({records:s},{signal:w.signal}),f.value=()=>{},v()}catch(d){d.message==="Cancelled"?(B(2,"mdi-cancel","\u6D41\u7A0B\u88AB\u624B\u52A8\u53D6\u6D88","\u4F60\u53D6\u6D88\u4E86\u5199\u5165 NFC \u6807\u7B7E\uFF0C\u8BF7\u91CD\u65B0\u5F00\u59CB\u6D41\u7A0B\u3002"),g(new Error("Cancelled"))):d.message.startsWith("Failed to write due to an IO error")?(B(1,"mdi-pencil-remove-outline","NFC Tag \u5199\u5165\u5931\u8D25","\u53D1\u751F\u4E86 I/O \u9519\u8BEF\uFF0C\u5199\u5165\u65F6\u8BF7\u4E0D\u8981\u79FB\u52A8\u624B\u673A\uFF0C\u4F1A\u5BFC\u81F4\u6570\u636E\u6D41\u4E0D\u7A33\u5B9A\uFF0C\u8BF7\u91CD\u65B0\u5F00\u59CB\u6D41\u7A0B\u3002"),g(d)):(f.value=()=>{},B(1,"mdi-nfc-variant-off","\u4E0D\u53D7\u652F\u6301\u7684 NFC \u8BBE\u5907","\u4F60\u7684\u8BBE\u5907\u6CA1\u6709\u53EF\u4F9B\u8C03\u7528\u7684 NFC \u8BBE\u5907\uFF0C\u8BF7\u786E\u8BA4\u4F60\u6253\u5F00\u4E86\u624B\u673A\u7684 NFC \u5F00\u5173\uFF0C\u5E76\u63D0\u4F9B\u4E86\u4F7F\u7528 NFC \u8BBE\u5907\u7684\u6743\u9650\u3002"),g(d))}})}function B(s,v,g,w){_.value.status=s,_.value.icon=v,_.value.title=g,_.value.message=w}function U(){_.value.status=0}return{isAndroid:Y,isChrome:H,DialogTab:u,STATUS_CLASS_NAME:I,STEP_DIALOG_TITLE:S,onDialogCallback:T,outputLoading:r,showDialog:N,stepInfo:p,statusInfo:_,createLaunchCard:W,closeDialog:x}}});const V=t=>(R("data-v-35e4b348"),t=t(),J(),t),j={class:"fit column no-wrap"},ee={class:"m--flex--0-0"},ae={class:"fit row q-px-sm"},te={class:"m--flex--0-0"},se={class:"fit q-pa-md"},le={class:"m--flex--0-0"},ue={class:"fit row q-px-sm"},oe={class:"q-gutter-x-sm"},ne={class:"m--flex--0-0"},ie={class:"fit row q-px-sm"},re={class:"q-gutter-x-sm"},de={class:"m--flex--0-0"},ce={class:"fit row q-px-sm"},fe={class:"q-gutter-x-sm"},_e={key:0,class:"m--flex--0-0"},me=V(()=>l("div",{class:"m--flex--1-1"},null,-1)),pe={class:"m--flex--0-0"},ve=V(()=>l("div",{class:"m--flex--1-1"},null,-1)),ge={class:"text-h6"},Fe={class:"flex-center",style:{width:"32px",height:"32px"}},he={class:"m--alipay-nfc-tag-writer--dialog-tab-container"},Ce={key:0,class:"nfc-writer flex flex-center"},Be={class:"column items-center text-center"};function we(t,u,I,S,f,T){return F(),G(X,{style:{height:"0"}},{default:a(()=>[l("div",j,[t.isAndroid&&t.isChrome?(F(),A($,{key:0},[l("div",ee,[l("div",ae,[e(m,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(i,null,{default:a(()=>[e(o,{header:""},{default:a(()=>[n("\u524D\u63D0\u6761\u4EF6")]),_:1})]),_:1})]),_:1})])]),e(C),l("div",te,[l("div",se,[e(o,null,{default:a(()=>[n(" \u5728\u4F7F\u7528\u672C\u5DE5\u5177\u4E4B\u524D\uFF0C\u60A8\u9700\u8981\uFF1A ")]),_:1}),e(o,null,{default:a(()=>[n(" 1\u3001\u51C6\u5907\u4E00\u4E9B\u7A7A\u767D\u7684 ntag 213/215/216\uFF0C\u53EF\u4EE5\u5728\u6DD8\u5B9D\u8D2D\u4E70\uFF0C\u7528\u4E8E\u5199\u5165 NFC Tag \u6570\u636E\u3002 ")]),_:1})])]),e(C),l("div",le,[l("div",ue,[e(m,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(i,null,{default:a(()=>[e(o,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u56FD\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(i,{side:"",class:"q-mr-md"},{default:a(()=>[l("div",oe,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u56FD\u670D",onClick:u[0]||(u[0]=r=>t.createLaunchCard("com.RoamingStar.BlueArchive")),loading:t.outputLoading},{loading:a(()=>[e(D)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),l("div",ne,[l("div",ie,[e(m,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(i,null,{default:a(()=>[e(o,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u56FD\u9645\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(i,{side:"",class:"q-mr-md"},{default:a(()=>[l("div",re,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u56FD\u9645\u670D",onClick:u[1]||(u[1]=r=>t.createLaunchCard("com.nexon.bluearchive")),loading:t.outputLoading},{loading:a(()=>[e(D)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),l("div",de,[l("div",ce,[e(m,{class:"fit q-pa-none no-wrap text-no-wrap"},{default:a(()=>[e(i,null,{default:a(()=>[e(o,{header:""},{default:a(()=>[n("\u851A\u84DD\u6863\u6848\u65E5\u670D\uFF0C\u542F\u52A8\uFF01")]),_:1})]),_:1}),e(i,{side:"",class:"q-mr-md"},{default:a(()=>[l("div",fe,[e(E,{unelevated:"","no-caps":"",color:"primary",label:"\u5199\u5165\u65E5\u670D",onClick:u[2]||(u[2]=r=>t.createLaunchCard("com.YostarJP.BlueArchive")),loading:t.outputLoading},{loading:a(()=>[e(D)]),_:1},8,["loading"])])]),_:1})]),_:1})])]),e(C),t.statusInfo.status?(F(),A("div",_e,[e(q,{flat:"",bordered:"",class:k(`m--alipay-nfc-tag-writer--status ${t.STATUS_CLASS_NAME[t.statusInfo.status]} q-ma-md`)},{default:a(()=>[e(m,{class:"q-pl-none q-py-sm"},{default:a(()=>[e(i,{avatar:""},{default:a(()=>[e(y,{class:"q-ml-md",name:t.statusInfo.icon},null,8,["name"])]),_:1}),e(i,{class:"q-pl-none"},{default:a(()=>[e(o,null,{default:a(()=>[n(h(t.statusInfo.title),1)]),_:1}),e(o,{caption:"",class:k(`-${t.STATUS_CLASS_NAME[t.statusInfo.status]}`)},{default:a(()=>[n(h(t.statusInfo.message),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["class"])])):Q("",!0),me],64)):(F(),A($,{key:1},[l("div",pe,[e(q,{flat:"",bordered:"",class:"m--alipay-nfc-tag-writer--status negative text-negative q-ma-md"},{default:a(()=>[e(m,{class:"q-pl-none q-py-sm"},{default:a(()=>[e(i,{avatar:""},{default:a(()=>[e(y,{class:"q-ml-md",name:"mdi-cellphone-remove"})]),_:1}),e(i,{class:"q-pl-none"},{default:a(()=>[e(o,null,{default:a(()=>[n("\u4E0D\u53D7\u652F\u6301\u7684\u5E73\u53F0")]),_:1}),e(o,{caption:"",class:"text-negative"},{default:a(()=>[n("\u8BE5\u5DE5\u5177\u53EA\u80FD\u5728\u652F\u6301 NFC \u529F\u80FD\u7684\u5B89\u5353\u8BBE\u5907\u4E0A\u4F7F\u7528\uFF0C\u4E14\u6D4F\u89C8\u5668\u5FC5\u987B\u662F Chrome \u5185\u6838\u3002")]),_:1})]),_:1})]),_:1})]),_:1})]),ve],64)),e(K,{class:"m--alipay-nfc-tag-writer--dialog non-selectable",modelValue:t.showDialog,"onUpdate:modelValue":u[4]||(u[4]=r=>t.showDialog=r),persistent:""},{default:a(()=>[e(q,null,{default:a(()=>[e(b,null,{default:a(()=>[l("div",ge,h(t.STEP_DIALOG_TITLE[t.stepInfo.currentTab])+"("+h(t.stepInfo.current)+"/"+h(t.stepInfo.total)+")",1)]),_:1}),e(b,{class:"absolute-top-right"},{default:a(()=>[l("div",Fe,[e(E,{dense:"",flat:"",icon:"mdi-close",onClick:u[3]||(u[3]=r=>t.closeDialog())})])]),_:1}),e(b,{class:"q-pt-none"},{default:a(()=>[l("div",he,[t.stepInfo.currentTab===t.DialogTab.NFCWriter?(F(),A("div",Ce,[l("div",Be,[e(y,{class:"q-mb-lg",size:"40px",name:"mdi-nfc"}),e(o,{class:"text-h6"},{default:a(()=>[n("\u9760\u8FD1 NFC \u6807\u7B7E")]),_:1}),e(o,{class:"text-h6"},{default:a(()=>[n("\u5199\u5165\u6570\u636E")]),_:1})])])):Q("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var De=z(Z,[["render",we],["__scopeId","data-v-35e4b348"]]);export{De as default};
