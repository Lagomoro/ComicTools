// ================================================================================
// * Module dependencies
// --------------------------------------------------------------------------------
import favicons from 'favicons';
import * as path from 'path';
import * as fs from 'fs';
// ================================================================================

// ================================================================================
//# region BuildAssets
// --------------------------------------------------------------------------------
class BuildAssets {
  // ------------------------------------------------------------------------------
  // * Constructor
  // ------------------------------------------------------------------------------
  constructor() {
    // empty
  }
  // ------------------------------------------------------------------------------
  // * Function
  // ------------------------------------------------------------------------------
  //# region BuildAssets
  // ------------------------------------------------------------------------------
  async run() {
    await this.buildFavicons()
  }
  // ------------------------------------------------------------------------------
  async buildFavicons() {
    console.log('Building Favicons');
    const response = await favicons('./build/assets/icon.png', { path: './public', icon: { favicons: true }});
    fs.mkdirSync('./public/icons', { recursive: true });
    response.images.map(async (image) => {
      if (image.name === 'favicon.ico') {
        console.log(`Building Favicons: ${ image.name }`);
        fs.writeFileSync(path.join('public', image.name), image.contents);
      }
      if (image.name.startsWith('favicon-')) {
        console.log(`Building Favicons: ${ image.name }`);
        fs.writeFileSync(path.join('public/icons', image.name), image.contents);
      }
    });
  }
  // ------------------------------------------------------------------------------
  //# endregion
  // ------------------------------------------------------------------------------
}
// --------------------------------------------------------------------------------
//# endregion
// ================================================================================

// ================================================================================
//# region BuildAssets
// --------------------------------------------------------------------------------
await new BuildAssets().run();
// --------------------------------------------------------------------------------
//# endregion
// ================================================================================
